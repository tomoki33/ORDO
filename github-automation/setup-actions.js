#!/usr/bin/env node/** * GitHub Projects è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ * - ãƒªãƒã‚¸ãƒˆãƒªã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆ * - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ URL ã‚’è‡ªå‹•å–å¾—ãƒ»æ›´æ–° */const { Octokit } = require('@octokit/rest');const fs = require('fs').promises;const path = require('path');const CONFIG = {  owner: 'tomoki33',  repo: 'ORDO',  token: process.env.GITHUB_TOKEN};// GitHub APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–const octokit = new Octokit({  auth: process.env.GITHUB_TOKEN});async function setupGitHubActions() {  try {    console.log('ğŸš€ GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®šé–‹å§‹...');        // ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§    const workflowFiles = [      '.github/workflows/add-to-project.yml',      '.github/workflows/project-automation.yml',       '.github/workflows/smart-project.yml',      '.github/workflows/README.md'    ];        // å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆ    for (const filePath of workflowFiles) {      const localPath = path.join('/Users/tomoki33/Desktop/Ordo', filePath);            try {        const content = await fs.readFile(localPath, 'utf8');        const contentEncoded = Buffer.from(content).toString('base64');                await octokit.rest.repos.createOrUpdateFileContents({          owner: CONFIG.owner,          repo: CONFIG.repo,          path: filePath,          message: `Add GitHub Actions: ${path.basename(filePath)}`,          content: contentEncoded        });                console.log(`âœ… ${filePath} ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¾ã—ãŸ`);      } catch (error) {        console.error(`âŒ ${filePath} ã®ã‚³ãƒŸãƒƒãƒˆã«å¤±æ•—:`, error.message);      }    }        console.log('\nğŸŠ GitHub Actions ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼');    console.log('\nğŸ“‹ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:');    console.log('1. Personal Access Token ã‚’ project æ¨©é™ã§ä½œæˆ');    console.log('2. Repository Settings â†’ Secrets â†’ ADD_TO_PROJECT_PAT ã‚’è¿½åŠ ');    console.log('3. GitHub Projects ã‚’ä½œæˆã—ã¦ URL ã‚’æ›´æ–°');    console.log('4. ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ (Priority, Epic, Size) ã‚’è¨­å®š');      } catch (error) {    console.error('âŒ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¨ãƒ©ãƒ¼:', error.message);  }}// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ URL ã‚’å–å¾—ã™ã‚‹é–¢æ•°async function getProjectUrl() {  try {    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã‚’å–å¾—    const response = await octokit.graphql(`      query($login: String!) {        user(login: $login) {          projectsV2(first: 10) {            nodes {              id              title              url              number            }          }        }      }    `, {      login: CONFIG.owner    });        const projects = response.user.projectsV2.nodes;    console.log('ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:');    projects.forEach(project => {      console.log(`- ${project.title}: ${project.url}`);    });      } catch (error) {    console.error('âŒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:', error.message);    console.log('ğŸ’¡ æ‰‹å‹•ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ URL ã‚’ç¢ºèªã—ã¦ãã ã•ã„');  }}async function main() {  if (!CONFIG.token) {    console.error('âš ï¸  ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãŒå¿…è¦ã§ã™:');    console.error('export GITHUB_TOKEN="your_token_here"');    process.exit(1);  }    await setupGitHubActions();
  console.log('\nğŸ” ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ URL ã‚’å–å¾—ä¸­...');
  await getProjectUrl();
}

main();
